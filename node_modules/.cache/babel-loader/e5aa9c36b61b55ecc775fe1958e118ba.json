{"ast":null,"code":"import { authenticationConstants } from '../actionTypes/authentication.constant';\nimport { alertActions } from './alert.action';\nimport { history } from '../../helpers/history';\nimport { authenticationService } from '../../services/authentication.service';\nexport var authenticationActions = {\n  login: login,\n  logout: logout\n};\n\nfunction login(username, type) {\n  console.log('---------------------------------');\n  console.log(username, type);\n  return function (dispatch) {\n    authenticationService.login(username, type).then(function (res) {\n      if (typeof res == 'object') {\n        dispatch(success(res));\n        history.push('/dashboard');\n      } else {\n        dispatch(failure(res));\n        dispatch(alertActions.error(res));\n      }\n    });\n  };\n\n  function success(user) {\n    return {\n      type: authenticationConstants.LOGIN_SUCCESS,\n      user: user\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: authenticationConstants.LOGIN_FAILURE,\n      error: error\n    };\n  }\n}\n\nfunction logout() {\n  authenticationService.logout();\n  history.push('/login');\n  return {\n    type: authenticationConstants.LOGOUT\n  };\n}","map":{"version":3,"sources":["/Users/liuxu/Desktop/GT/2019-spring/cs6301/6301Spring19Web1/PTTWeb1/src/redux/actionCreators/authentication.action.ts"],"names":["authenticationConstants","alertActions","history","authenticationService","authenticationActions","login","logout","username","type","console","log","dispatch","then","res","success","push","failure","error","user","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT"],"mappings":"AAAA,SAASA,uBAAT,QAAwC,wCAAxC;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,OAAT,QAAwB,uBAAxB;AACA,SAASC,qBAAT,QAAsC,uCAAtC;AAEA,OAAO,IAAMC,qBAAqB,GAAG;AAClCC,EAAAA,KAAK,EAALA,KADkC;AAElCC,EAAAA,MAAM,EAANA;AAFkC,CAA9B;;AAKP,SAASD,KAAT,CAAeE,QAAf,EAAiCC,IAAjC,EAA+C;AAC5CC,EAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ,EAAsBC,IAAtB;AACA,SAAO,UAAAG,QAAQ,EAAI;AAChBR,IAAAA,qBAAqB,CAACE,KAAtB,CAA4BE,QAA5B,EAAsCC,IAAtC,EAA4CI,IAA5C,CAAiD,UAAAC,GAAG,EAAI;AACrD,UAAI,OAAOA,GAAP,IAAc,QAAlB,EAA4B;AACzBF,QAAAA,QAAQ,CAACG,OAAO,CAACD,GAAD,CAAR,CAAR;AACAX,QAAAA,OAAO,CAACa,IAAR,CAAa,YAAb;AACF,OAHD,MAGO;AACJJ,QAAAA,QAAQ,CAACK,OAAO,CAACH,GAAD,CAAR,CAAR;AACAF,QAAAA,QAAQ,CAACV,YAAY,CAACgB,KAAb,CAAmBJ,GAAnB,CAAD,CAAR;AACF;AACH,KARD;AASF,GAVD;;AAYA,WAASC,OAAT,CAAiBI,IAAjB,EAA4B;AACzB,WAAO;AAAEV,MAAAA,IAAI,EAAER,uBAAuB,CAACmB,aAAhC;AAA+CD,MAAAA,IAAI,EAAJA;AAA/C,KAAP;AACF;;AACD,WAASF,OAAT,CAAiBC,KAAjB,EAA6B;AAC1B,WAAO;AAAET,MAAAA,IAAI,EAAER,uBAAuB,CAACoB,aAAhC;AAA+CH,MAAAA,KAAK,EAALA;AAA/C,KAAP;AACF;AACH;;AAED,SAASX,MAAT,GAAkB;AACfH,EAAAA,qBAAqB,CAACG,MAAtB;AACAJ,EAAAA,OAAO,CAACa,IAAR,CAAa,QAAb;AACA,SAAO;AAAEP,IAAAA,IAAI,EAAER,uBAAuB,CAACqB;AAAhC,GAAP;AACF","sourcesContent":["import { authenticationConstants } from '../actionTypes/authentication.constant';\nimport { alertActions } from './alert.action';\nimport { history } from '../../helpers/history';\nimport { authenticationService } from '../../services/authentication.service';\n\nexport const authenticationActions = {\n   login,\n   logout\n};\n\nfunction login(username: string, type: string) {\n   console.log('---------------------------------');\n   console.log(username, type);\n   return dispatch => {\n      authenticationService.login(username, type).then(res => {\n         if (typeof res == 'object') {\n            dispatch(success(res));\n            history.push('/dashboard');\n         } else {\n            dispatch(failure(res));\n            dispatch(alertActions.error(res));\n         }\n      });\n   };\n\n   function success(user: any) {\n      return { type: authenticationConstants.LOGIN_SUCCESS, user };\n   }\n   function failure(error: any) {\n      return { type: authenticationConstants.LOGIN_FAILURE, error };\n   }\n}\n\nfunction logout() {\n   authenticationService.logout();\n   history.push('/login');\n   return { type: authenticationConstants.LOGOUT };\n}\n"]},"metadata":{},"sourceType":"module"}